<!--
<ng-container *ngIf="systemState$ | async as systemState; else loading">
-->
    
<ng-container *ngIf="systemState; else loading">
    
    <div class="headerRow">
        <img src="../../../assets/LonelyLobster.jfif" alt="Lonely Lobster" height="100">
 
        <div>
            <h4>Lonely Lobster</h4>
            <p> System: "<strong>{{ systemState.id }}</strong>"  Time:   {{ systemState.time }} </p>
        </div>
        <label for="numIterations"># iterations per click:</label>
        <input  type="number" 
                class="inputFormNumber" 
                min="1"
                id="numIteration" 
                [(ngModel)] = "numIterationsToExecute">

        <button type="button" class="submitButton" (click)="nextIterationHandler()">
            Next {{numIterationsToExecute}} Iteration(s)
        </button>
 
    </div>
    <div>
<!--
        <div class="valueChainsAndOutputBasket" [style]="'height:1000px'" >
-->
        <div class="valueChainsAndOutputBasket" [style]="'height:' +  vcsBoxSize.height  + 'px'" >

            <div class="valueChains" [style]="'width:' + vcsBoxSize.width + 'px; height:' + vcsBoxSize.height + 'px' ">
                <div *ngFor="let vc of systemState.valueChains">
                    <app-value-chain [vc]="vc" [vcBoxSize]="vcBoxSize"></app-value-chain>
                </div>
            </div>

            <div class="outputBasket" [style]="'width:' + obBoxSize.width + 'px; height:' + obBoxSize.height + 'px' ">
                    <app-output-basket [ob]="systemState.outputBasket" [obBoxSize]="obBoxSize"></app-output-basket>
            </div>
        </div>
 
    </div>
    <app-workers-stats [wosStats]="systemState.workersState" ></app-workers-stats>

</ng-container>

<ng-template #loading>
    <div class="ui active dimmer">
        <div class="ui large text loader">System state loading ... </div>
    </div>
</ng-template>
<br/>
<br/>


<br/>
<br/>
<p># value-chains = {{ this.numValueChains }}
<p>vcsBoxSize = w: {{ this.vcsBoxSize.width }}, h: {{ this.vcsBoxSize.height }}
<p>vcBoxSize = w: {{ this.vcBoxSize.width }}, h: {{ this.vcBoxSize.height }}

<p>obBoxSize = w: {{ this.obBoxSize.width }}, h: {{ this.obBoxSize.height }}
